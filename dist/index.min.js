'use strict';var React=require('react'),assign=require('object-assign'),PropTypes=require('prop-types');function _assertThisInitialized(e) {
  if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e;
}
function _callSuper(t, o, e) {
  return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));
}
function _classCallCheck(a, n) {
  if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function");
}
function _defineProperties(e, r) {
  for (var t = 0; t < r.length; t++) {
    var o = r[t];
    o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);
  }
}
function _createClass(e, r, t) {
  return r && _defineProperties(e.prototype, r), Object.defineProperty(e, "prototype", {
    writable: !1
  }), e;
}
function _defineProperty(e, r, t) {
  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {
    value: t,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : e[r] = t, e;
}
function _extends() {
  return _extends = Object.assign ? Object.assign.bind() : function (n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);
    }
    return n;
  }, _extends.apply(null, arguments);
}
function _getPrototypeOf(t) {
  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {
    return t.__proto__ || Object.getPrototypeOf(t);
  }, _getPrototypeOf(t);
}
function _inherits(t, e) {
  if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e && e.prototype, {
    constructor: {
      value: t,
      writable: !0,
      configurable: !0
    }
  }), Object.defineProperty(t, "prototype", {
    writable: !1
  }), e && _setPrototypeOf(t, e);
}
function _isNativeReflectConstruct() {
  try {
    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
  } catch (t) {}
  return (_isNativeReflectConstruct = function () {
    return !!t;
  })();
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread2(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      _defineProperty(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
}
function _possibleConstructorReturn(t, e) {
  if (e && ("object" == typeof e || "function" == typeof e)) return e;
  if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
  return _assertThisInitialized(t);
}
function _setPrototypeOf(t, e) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {
    return t.__proto__ = e, t;
  }, _setPrototypeOf(t, e);
}
function _toPrimitive(t, r) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (String )(t);
}
function _toPropertyKey(t) {
  var i = _toPrimitive(t, "string");
  return "symbol" == typeof i ? i : i + "";
}var ERR_SPA_UNAVALIABLE = 'frosmo.spa is not available, fallback to console.error';
function error(message) {
  if (!window || !window.frosmo || !window.frosmo.spa) {
    console.warn(ERR_SPA_UNAVALIABLE);
    console.error(message);
  }
  window.frosmo.spa.log.error(message, 'spa.react.placement');
}
var logger = {
  error: error
};var DOM_EVENT_FROSMO_SPA_READY = 'frosmo.spa.ready';
var ModificationService = /*#__PURE__*/function () {
  function ModificationService(_ref) {
    var id = _ref.id,
      onComplete = _ref.onComplete;
    _classCallCheck(this, ModificationService);
    var noop = function noop() {};
    this._id = id;
    this._func = onComplete || noop;
    this._modificationContextHandle = null;
    this._fetchModifications = this._fetchModifications.bind(this);
  }
  return _createClass(ModificationService, [{
    key: "fetch",
    value: function fetch() {
      if (!window) {
        return;
      }
      if (window.frosmo && window.frosmo.spa) {
        this._fetchModifications();
      } else if (window.addEventListener) {
        window.addEventListener(DOM_EVENT_FROSMO_SPA_READY, this._fetchModifications);
      } else if (window.attachEvent) {
        window.attachEvent(DOM_EVENT_FROSMO_SPA_READY, this._fetchModifications);
      } else {
        logger.error('Event cannot be attached');
      }
    }
  }, {
    key: "_fetchModifications",
    value: function _fetchModifications() {
      var _this = this;
      this._modificationContextHandle = window.frosmo.spa.requestBySelector(this._id);
      this._modificationContextHandle.then(function (context) {
        return _this._func(context);
      })["catch"](function (error) {
        logger.error(error);
        _this._func(null);
      });
    }
  }, {
    key: "cancel",
    value: function cancel() {
      if (this._modificationContextHandle) {
        this._modificationContextHandle.cancel();
        this._modificationContextHandle = null;
      }
      if (window.removeEventListener) {
        window.removeEventListener(DOM_EVENT_FROSMO_SPA_READY, this._fetchModifications);
      } else if (window.detachEvent) {
        window.detachEvent(DOM_EVENT_FROSMO_SPA_READY, this._fetchModifications);
      } else {
        logger.error('Event cannot be detached');
      }
      this._func = null;
    }
  }]);
}();function withModification(WrappedComponent) {
  return /*#__PURE__*/function (_Component) {
    function _class(props) {
      var _this;
      _classCallCheck(this, _class);
      _this = _callSuper(this, _class, [props]);
      if (!props.id) {
        console && console.warn && console.warn('FrosmoPlacement: "id" property missing.', props);
      }
      _this.state = {
        isReady: false,
        modificationContext: null
      };
      _this._modificationContextService = new ModificationService({
        id: props.id,
        onComplete: function onComplete(modificationContext) {
          _this.setState({
            modificationContext: modificationContext,
            isReady: true
          });
        }
      });
      return _this;
    }
    _inherits(_class, _Component);
    return _createClass(_class, [{
      key: "componentWillUnmount",
      value: function componentWillUnmount() {
        this._modificationContextService.cancel();
      }
    }, {
      key: "componentDidMount",
      value: function componentDidMount() {
        this._modificationContextService.fetch();
      }
    }, {
      key: "render",
      value: function render() {
        if (!this.state.isReady) {
          return this.props.defaultComponent ? React.createElement(this.props.defaultComponent, this.props) : null;
        }
        return /*#__PURE__*/React.createElement(WrappedComponent, _extends({
          modificationContext: this.state.modificationContext
        }, this.props));
      }
    }]);
  }(React.Component);
}var _createReactElement = function _createReactElement(component) {
  return component ? React.createElement(component) : null;
};
var hasChildren = function hasChildren(children) {
  return children && React.Children.count(children) > 0;
};
var buildMessageProps = function buildMessageProps(modificationContext) {
  // Set templateDefaults as props
  var params = modificationContext.params;

  // Build props for modification component
  return _objectSpread2(_objectSpread2({}, params), {}, {
    frosmoModificationContext: modificationContext
  });
};
var createReactComponent = function createReactComponent(component, children, messageProps) {
  if (component) {
    return React.createElement(component, messageProps);
  } else if (hasChildren(children)) {
    return React.Children.map(children, function (child) {
      var childProps = assign({}, child.props, messageProps);
      return React.createElement(child.type, childProps);
    });
  } else {
    return null;
  }
};

/**
 * Custom React component provided by Frosmo (Joona Ojapalo)
 */
var _renderSuccess = function _renderSuccess(props) {
  var children = props.children,
    component = props.component,
    defaultComponent = props.defaultComponent,
    modificationContext = props.modificationContext;
  var messageProps = buildMessageProps(modificationContext);
  var outputComponent = createReactComponent(component, children, messageProps);

  // Display tracking
  if (!outputComponent) {
    // Show defaultComponent
    return _createReactElement(defaultComponent);
  } else {
    modificationContext.setDisplayed();
    return outputComponent;
  }
};
function ChildComponent (props) {
  var defaultComponent = props.defaultComponent,
    modificationContext = props.modificationContext;
  if (modificationContext !== null) {
    return _renderSuccess(props);
  }
  return _createReactElement(defaultComponent);
}var ModificationContextPropTypes = {
  variation: PropTypes.number.isRequired,
  params: PropTypes.object.isRequired,
  content: PropTypes.string.isRequired,
  setDisplayed: PropTypes.func.isRequired,
  setClicked: PropTypes.func.isRequired,
  setTrueDisplayed: PropTypes.func.isRequired,
  setTrackableElements: PropTypes.func.isRequired,
  startTracking: PropTypes.func.isRequired,
  error: PropTypes.func.isRequired,
  clear: PropTypes.func.isRequired
};
var FrosmoPropTypes = {
  children: PropTypes.node,
  modificationContext: PropTypes.exact(ModificationContextPropTypes)
};var FrosmoComponentDefaultProps = {
  children: null,
  component: null,
  defaultComponent: null,
  modificationContext: null
};
var FrosmoPlacement$1 = /*#__PURE__*/function (_Component) {
  function FrosmoPlacement(props) {
    _classCallCheck(this, FrosmoPlacement);
    return _callSuper(this, FrosmoPlacement, [props]);
  }
  _inherits(FrosmoPlacement, _Component);
  return _createClass(FrosmoPlacement, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var modificationContext = this.props.modificationContext;
      if (modificationContext !== null) {
        // start tracking the message
        modificationContext.setTrackableElements(this.frosmoMessage);
        modificationContext.startTracking();
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;
      // Pass state as immutable props
      var element = /*#__PURE__*/React.createElement(ChildComponent, this.props);

      // Wrap in fragment
      if (this.props.useFragment) {
        return /*#__PURE__*/React.createElement(React.Fragment, null, element);
      }

      // Wrap inside a trackable div element
      return /*#__PURE__*/React.createElement("div", {
        "data-frosmo-elementid": this.props.id,
        ref: function ref(_ref) {
          _this.frosmoMessage = _ref;
        }
      }, element);
    }
  }]);
}(React.Component);
FrosmoPlacement$1.propTypes = FrosmoPropTypes;
FrosmoPlacement$1.defaultProps = FrosmoComponentDefaultProps;var FrosmoPlacement = withModification(FrosmoPlacement$1);exports.FrosmoPlacement=FrosmoPlacement;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlcyI6WyIuLi9zcmMvdXRpbHMvbG9nZ2VyLmpzIiwiLi4vc3JjL3NlcnZpY2VzL01vZGlmaWNhdGlvblNlcnZpY2UuanMiLCIuLi9zcmMvY29tcG9uZW50cy9ob2NzL3dpdGhNb2RpZmljYXRpb24uanMiLCIuLi9zcmMvY29tcG9uZW50cy9mcm9zbW8tcGxhY2VtZW50L0NoaWxkQ29tcG9uZW50LmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvZnJvc21vLXBsYWNlbWVudC9zaGFwZXMuanMiLCIuLi9zcmMvY29tcG9uZW50cy9mcm9zbW8tcGxhY2VtZW50L0Zyb3Ntb1BsYWNlbWVudC5qcyIsIi4uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IEVSUl9TUEFfVU5BVkFMSUFCTEUgPSAnZnJvc21vLnNwYSBpcyBub3QgYXZhaWxhYmxlLCBmYWxsYmFjayB0byBjb25zb2xlLmVycm9yJztcblxuZnVuY3Rpb24gZXJyb3IobWVzc2FnZSkge1xuICAgIGlmICghd2luZG93IHx8ICF3aW5kb3cuZnJvc21vIHx8ICF3aW5kb3cuZnJvc21vLnNwYSkge1xuICAgICAgICBjb25zb2xlLndhcm4oRVJSX1NQQV9VTkFWQUxJQUJMRSk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgd2luZG93LmZyb3Ntby5zcGEubG9nLmVycm9yKG1lc3NhZ2UsICdzcGEucmVhY3QucGxhY2VtZW50Jyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBlcnJvcixcbn1cbiIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL3V0aWxzL2xvZ2dlclwiO1xuXG5jb25zdCBET01fRVZFTlRfRlJPU01PX1NQQV9SRUFEWSA9ICdmcm9zbW8uc3BhLnJlYWR5JztcblxuXG5jbGFzcyBNb2RpZmljYXRpb25TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGlkLCBvbkNvbXBsZXRlIH0pIHtcbiAgICAgICAgY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuXG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgIHRoaXMuX2Z1bmMgPSBvbkNvbXBsZXRlIHx8IG5vb3A7XG5cbiAgICAgICAgdGhpcy5fbW9kaWZpY2F0aW9uQ29udGV4dEhhbmRsZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2ZldGNoTW9kaWZpY2F0aW9ucyA9IHRoaXMuX2ZldGNoTW9kaWZpY2F0aW9ucy5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGZldGNoKCkge1xuICAgICAgICBpZiAoIXdpbmRvdykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpbmRvdy5mcm9zbW8gJiYgd2luZG93LmZyb3Ntby5zcGEpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZldGNoTW9kaWZpY2F0aW9ucygpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihET01fRVZFTlRfRlJPU01PX1NQQV9SRUFEWSwgdGhpcy5fZmV0Y2hNb2RpZmljYXRpb25zKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hdHRhY2hFdmVudChET01fRVZFTlRfRlJPU01PX1NQQV9SRUFEWSwgdGhpcy5fZmV0Y2hNb2RpZmljYXRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXZlbnQgY2Fubm90IGJlIGF0dGFjaGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZmV0Y2hNb2RpZmljYXRpb25zKCkge1xuICAgICAgICB0aGlzLl9tb2RpZmljYXRpb25Db250ZXh0SGFuZGxlID0gd2luZG93LmZyb3Ntby5zcGEucmVxdWVzdEJ5U2VsZWN0b3IodGhpcy5faWQpO1xuICAgICAgICB0aGlzLl9tb2RpZmljYXRpb25Db250ZXh0SGFuZGxlXG4gICAgICAgICAgICAudGhlbihjb250ZXh0ID0+IHRoaXMuX2Z1bmMoY29udGV4dCkpXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5fZnVuYyhudWxsKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX21vZGlmaWNhdGlvbkNvbnRleHRIYW5kbGUpIHtcbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWNhdGlvbkNvbnRleHRIYW5kbGUuY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLl9tb2RpZmljYXRpb25Db250ZXh0SGFuZGxlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgRE9NX0VWRU5UX0ZST1NNT19TUEFfUkVBRFksXG4gICAgICAgICAgICAgICAgdGhpcy5fZmV0Y2hNb2RpZmljYXRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5kZXRhY2hFdmVudCkge1xuICAgICAgICAgICAgd2luZG93LmRldGFjaEV2ZW50KFxuICAgICAgICAgICAgICAgIERPTV9FVkVOVF9GUk9TTU9fU1BBX1JFQURZLFxuICAgICAgICAgICAgICAgIHRoaXMuX2ZldGNoTW9kaWZpY2F0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXZlbnQgY2Fubm90IGJlIGRldGFjaGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mdW5jID0gbnVsbDtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGlmaWNhdGlvblNlcnZpY2U7XG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IE1vZGlmaWNhdGlvblNlcnZpY2UgZnJvbSAnLi4vLi4vc2VydmljZXMvTW9kaWZpY2F0aW9uU2VydmljZSc7XG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd2l0aE1vZGlmaWNhdGlvbihXcmFwcGVkQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNsYXNzIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICAgICAgaWYgKCFwcm9wcy5pZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUgJiYgY29uc29sZS53YXJuICYmIGNvbnNvbGUud2FybignRnJvc21vUGxhY2VtZW50OiBcImlkXCIgcHJvcGVydHkgbWlzc2luZy4nLCBwcm9wcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgaXNSZWFkeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbW9kaWZpY2F0aW9uQ29udGV4dDogbnVsbCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWNhdGlvbkNvbnRleHRTZXJ2aWNlID0gbmV3IE1vZGlmaWNhdGlvblNlcnZpY2Uoe1xuICAgICAgICAgICAgICAgIGlkOiBwcm9wcy5pZCxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAobW9kaWZpY2F0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWNhdGlvbkNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JlYWR5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5fbW9kaWZpY2F0aW9uQ29udGV4dFNlcnZpY2UuY2FuY2VsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWNhdGlvbkNvbnRleHRTZXJ2aWNlLmZldGNoKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXIoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNSZWFkeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmRlZmF1bHRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgPyBSZWFjdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuZGVmYXVsdENvbXBvbmVudCwgdGhpcy5wcm9wcylcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gPFdyYXBwZWRDb21wb25lbnRcbiAgICAgICAgICAgICAgICBtb2RpZmljYXRpb25Db250ZXh0PXt0aGlzLnN0YXRlLm1vZGlmaWNhdGlvbkNvbnRleHR9XG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXNzaWduIGZyb20gJ29iamVjdC1hc3NpZ24nO1xuXG5cbmNvbnN0IF9jcmVhdGVSZWFjdEVsZW1lbnQgPSBjb21wb25lbnQgPT5cbiAgICBjb21wb25lbnRcbiAgICAgICAgPyBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudClcbiAgICAgICAgOiBudWxsO1xuXG5jb25zdCBoYXNDaGlsZHJlbiA9IChjaGlsZHJlbikgPT4gY2hpbGRyZW4gJiYgUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pID4gMDtcbmNvbnN0IGJ1aWxkTWVzc2FnZVByb3BzID0gKG1vZGlmaWNhdGlvbkNvbnRleHQpID0+IHtcbiAgICAvLyBTZXQgdGVtcGxhdGVEZWZhdWx0cyBhcyBwcm9wc1xuICAgIGNvbnN0IHsgcGFyYW1zIH0gPSBtb2RpZmljYXRpb25Db250ZXh0O1xuXG4gICAgLy8gQnVpbGQgcHJvcHMgZm9yIG1vZGlmaWNhdGlvbiBjb21wb25lbnRcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgIGZyb3Ntb01vZGlmaWNhdGlvbkNvbnRleHQ6IG1vZGlmaWNhdGlvbkNvbnRleHQsXG4gICAgfTtcbn07XG5cbmNvbnN0IGNyZWF0ZVJlYWN0Q29tcG9uZW50ID0gKGNvbXBvbmVudCwgY2hpbGRyZW4sIG1lc3NhZ2VQcm9wcykgPT4ge1xuICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50LCBtZXNzYWdlUHJvcHMpO1xuICAgIH0gZWxzZSBpZiAoaGFzQ2hpbGRyZW4oY2hpbGRyZW4pKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5tYXAoY2hpbGRyZW4sIGNoaWxkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkUHJvcHMgPSBhc3NpZ24oe30sIGNoaWxkLnByb3BzLCBtZXNzYWdlUHJvcHMpO1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY2hpbGQudHlwZSwgY2hpbGRQcm9wcyk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5cbi8qKlxuICogQ3VzdG9tIFJlYWN0IGNvbXBvbmVudCBwcm92aWRlZCBieSBGcm9zbW8gKEpvb25hIE9qYXBhbG8pXG4gKi9cbmNvbnN0IF9yZW5kZXJTdWNjZXNzID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgY29tcG9uZW50LFxuICAgICAgICBkZWZhdWx0Q29tcG9uZW50LFxuICAgICAgICBtb2RpZmljYXRpb25Db250ZXh0LFxuICAgIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IG1lc3NhZ2VQcm9wcyA9IGJ1aWxkTWVzc2FnZVByb3BzKG1vZGlmaWNhdGlvbkNvbnRleHQpO1xuICAgIGNvbnN0IG91dHB1dENvbXBvbmVudCA9IGNyZWF0ZVJlYWN0Q29tcG9uZW50KGNvbXBvbmVudCwgY2hpbGRyZW4sIG1lc3NhZ2VQcm9wcyk7XG5cbiAgICAvLyBEaXNwbGF5IHRyYWNraW5nXG4gICAgaWYgKCFvdXRwdXRDb21wb25lbnQpIHtcbiAgICAgICAgLy8gU2hvdyBkZWZhdWx0Q29tcG9uZW50XG4gICAgICAgIHJldHVybiBfY3JlYXRlUmVhY3RFbGVtZW50KGRlZmF1bHRDb21wb25lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZGlmaWNhdGlvbkNvbnRleHQuc2V0RGlzcGxheWVkKCk7XG4gICAgICAgIHJldHVybiBvdXRwdXRDb21wb25lbnQ7XG4gICAgfVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICBjb25zdCB7XG4gICAgICAgIGRlZmF1bHRDb21wb25lbnQsXG4gICAgICAgIG1vZGlmaWNhdGlvbkNvbnRleHRcbiAgICB9ID0gcHJvcHM7XG5cbiAgICBpZiAobW9kaWZpY2F0aW9uQ29udGV4dCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gX3JlbmRlclN1Y2Nlc3MocHJvcHMpO1xuICAgIH1cblxuICAgIHJldHVybiBfY3JlYXRlUmVhY3RFbGVtZW50KGRlZmF1bHRDb21wb25lbnQpO1xufTtcbiIsImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jb25zdCBNb2RpZmljYXRpb25Db250ZXh0UHJvcFR5cGVzID0ge1xuICAgIHZhcmlhdGlvbjogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIHBhcmFtczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGNvbnRlbnQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBzZXREaXNwbGF5ZWQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgc2V0Q2xpY2tlZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBzZXRUcnVlRGlzcGxheWVkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNldFRyYWNrYWJsZUVsZW1lbnRzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHN0YXJ0VHJhY2tpbmc6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgZXJyb3I6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgY2xlYXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbn1cblxuY29uc3QgRnJvc21vUHJvcFR5cGVzID0ge1xuICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgICBtb2RpZmljYXRpb25Db250ZXh0OiBQcm9wVHlwZXMuZXhhY3QoTW9kaWZpY2F0aW9uQ29udGV4dFByb3BUeXBlcyksXG59O1xuXG5leHBvcnQge1xuICAgIEZyb3Ntb1Byb3BUeXBlcyxcbn1cbiIsIi8qIGdsb2JhbCBmcm9zbW8gKi9cblxuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBDaGlsZENvbXBvbmVudCBmcm9tICcuL0NoaWxkQ29tcG9uZW50JztcblxuaW1wb3J0IHsgRnJvc21vUHJvcFR5cGVzIH0gZnJvbSBcIi4vc2hhcGVzXCI7XG5cbmNvbnN0IEZyb3Ntb0NvbXBvbmVudERlZmF1bHRQcm9wcyA9IHtcbiAgICBjaGlsZHJlbjogbnVsbCxcbiAgICBjb21wb25lbnQ6IG51bGwsXG4gICAgZGVmYXVsdENvbXBvbmVudDogbnVsbCxcbiAgICBtb2RpZmljYXRpb25Db250ZXh0OiBudWxsLFxufTtcblxuY2xhc3MgRnJvc21vUGxhY2VtZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHsgbW9kaWZpY2F0aW9uQ29udGV4dCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKG1vZGlmaWNhdGlvbkNvbnRleHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IHRyYWNraW5nIHRoZSBtZXNzYWdlXG4gICAgICAgICAgICBtb2RpZmljYXRpb25Db250ZXh0LnNldFRyYWNrYWJsZUVsZW1lbnRzKHRoaXMuZnJvc21vTWVzc2FnZSk7XG4gICAgICAgICAgICBtb2RpZmljYXRpb25Db250ZXh0LnN0YXJ0VHJhY2tpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgLy8gUGFzcyBzdGF0ZSBhcyBpbW11dGFibGUgcHJvcHNcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IDxDaGlsZENvbXBvbmVudCB7Li4udGhpcy5wcm9wc30gLz47XG5cbiAgICAgICAgLy8gV3JhcCBpbiBmcmFnbWVudFxuICAgICAgICBpZiAodGhpcy5wcm9wcy51c2VGcmFnbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIDxSZWFjdC5GcmFnbWVudD57ZWxlbWVudH08L1JlYWN0LkZyYWdtZW50PjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdyYXAgaW5zaWRlIGEgdHJhY2thYmxlIGRpdiBlbGVtZW50XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgZGF0YS1mcm9zbW8tZWxlbWVudGlkPXt0aGlzLnByb3BzLmlkfVxuICAgICAgICAgICAgICAgIHJlZj17IHJlZiA9PiB7IHRoaXMuZnJvc21vTWVzc2FnZSA9IHJlZjsgfSB9PlxuXG4gICAgICAgICAgICAgICAgICAgIHtlbGVtZW50fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5Gcm9zbW9QbGFjZW1lbnQucHJvcFR5cGVzID0gRnJvc21vUHJvcFR5cGVzO1xuRnJvc21vUGxhY2VtZW50LmRlZmF1bHRQcm9wcyA9IEZyb3Ntb0NvbXBvbmVudERlZmF1bHRQcm9wcztcblxuZXhwb3J0IGRlZmF1bHQgRnJvc21vUGxhY2VtZW50O1xuIiwiaW1wb3J0IHdpdGhNb2RpZmljYXRpb24gZnJvbSAnLi9jb21wb25lbnRzL2hvY3Mvd2l0aE1vZGlmaWNhdGlvbic7XG5pbXBvcnQgRnJvc21vUGxhY2VtZW50Q29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50cy9mcm9zbW8tcGxhY2VtZW50JztcblxuY29uc3QgRnJvc21vUGxhY2VtZW50ID0gd2l0aE1vZGlmaWNhdGlvbihGcm9zbW9QbGFjZW1lbnRDb21wb25lbnQpO1xuXG5leHBvcnQge1xuICAgIEZyb3Ntb1BsYWNlbWVudCxcbn07XG4iXSwibmFtZXMiOlsiRVJSX1NQQV9VTkFWQUxJQUJMRSIsImVycm9yIiwibWVzc2FnZSIsIndpbmRvdyIsImZyb3NtbyIsInNwYSIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwiRE9NX0VWRU5UX0ZST1NNT19TUEFfUkVBRFkiLCJNb2RpZmljYXRpb25TZXJ2aWNlIiwiX3JlZiIsImlkIiwib25Db21wbGV0ZSIsIl9jbGFzc0NhbGxDaGVjayIsIm5vb3AiLCJfaWQiLCJfZnVuYyIsIl9tb2RpZmljYXRpb25Db250ZXh0SGFuZGxlIiwiX2ZldGNoTW9kaWZpY2F0aW9ucyIsImJpbmQiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsImZldGNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwibG9nZ2VyIiwiX3RoaXMiLCJyZXF1ZXN0QnlTZWxlY3RvciIsInRoZW4iLCJjb250ZXh0IiwiY2FuY2VsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50Iiwid2l0aE1vZGlmaWNhdGlvbiIsIldyYXBwZWRDb21wb25lbnQiLCJfQ29tcG9uZW50IiwiX2NsYXNzIiwicHJvcHMiLCJfY2FsbFN1cGVyIiwic3RhdGUiLCJpc1JlYWR5IiwibW9kaWZpY2F0aW9uQ29udGV4dCIsIl9tb2RpZmljYXRpb25Db250ZXh0U2VydmljZSIsInNldFN0YXRlIiwiX2luaGVyaXRzIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJjb21wb25lbnREaWRNb3VudCIsInJlbmRlciIsImRlZmF1bHRDb21wb25lbnQiLCJSZWFjdCIsImNyZWF0ZUVsZW1lbnQiLCJfZXh0ZW5kcyIsIkNvbXBvbmVudCIsIl9jcmVhdGVSZWFjdEVsZW1lbnQiLCJjb21wb25lbnQiLCJoYXNDaGlsZHJlbiIsImNoaWxkcmVuIiwiQ2hpbGRyZW4iLCJjb3VudCIsImJ1aWxkTWVzc2FnZVByb3BzIiwicGFyYW1zIiwiX29iamVjdFNwcmVhZCIsImZyb3Ntb01vZGlmaWNhdGlvbkNvbnRleHQiLCJjcmVhdGVSZWFjdENvbXBvbmVudCIsIm1lc3NhZ2VQcm9wcyIsIm1hcCIsImNoaWxkIiwiY2hpbGRQcm9wcyIsImFzc2lnbiIsInR5cGUiLCJfcmVuZGVyU3VjY2VzcyIsIm91dHB1dENvbXBvbmVudCIsInNldERpc3BsYXllZCIsIk1vZGlmaWNhdGlvbkNvbnRleHRQcm9wVHlwZXMiLCJ2YXJpYXRpb24iLCJQcm9wVHlwZXMiLCJudW1iZXIiLCJpc1JlcXVpcmVkIiwib2JqZWN0IiwiY29udGVudCIsInN0cmluZyIsImZ1bmMiLCJzZXRDbGlja2VkIiwic2V0VHJ1ZURpc3BsYXllZCIsInNldFRyYWNrYWJsZUVsZW1lbnRzIiwic3RhcnRUcmFja2luZyIsImNsZWFyIiwiRnJvc21vUHJvcFR5cGVzIiwibm9kZSIsImV4YWN0IiwiRnJvc21vQ29tcG9uZW50RGVmYXVsdFByb3BzIiwiRnJvc21vUGxhY2VtZW50IiwiZnJvc21vTWVzc2FnZSIsImVsZW1lbnQiLCJDaGlsZENvbXBvbmVudCIsInVzZUZyYWdtZW50IiwiRnJhZ21lbnQiLCJyZWYiLCJwcm9wVHlwZXMiLCJkZWZhdWx0UHJvcHMiLCJGcm9zbW9QbGFjZW1lbnRDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBQ0EsSUFBTUEsbUJBQW1CLEdBQUcsd0RBQXdELENBQUE7QUFFcEYsU0FBU0MsS0FBS0EsQ0FBQ0MsT0FBTyxFQUFFO0FBQ3BCLEVBQUEsSUFBSSxDQUFDQyxNQUFNLElBQUksQ0FBQ0EsTUFBTSxDQUFDQyxNQUFNLElBQUksQ0FBQ0QsTUFBTSxDQUFDQyxNQUFNLENBQUNDLEdBQUcsRUFBRTtBQUNqREMsSUFBQUEsT0FBTyxDQUFDQyxJQUFJLENBQUNQLG1CQUFtQixDQUFDLENBQUE7QUFDakNNLElBQUFBLE9BQU8sQ0FBQ0wsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQTtBQUMxQixHQUFBO0FBRUFDLEVBQUFBLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDQyxHQUFHLENBQUNHLEdBQUcsQ0FBQ1AsS0FBSyxDQUFDQyxPQUFPLEVBQUUscUJBQXFCLENBQUMsQ0FBQTtBQUMvRCxDQUFBO0FBRUEsYUFBZTtBQUNYRCxFQUFBQSxLQUFLLEVBQUxBLEtBQUFBO0FBQ0osQ0FBQyxDQ1pELElBQU1RLDBCQUEwQixHQUFHLGtCQUFrQixDQUFBO0FBQUMsSUFHaERDLG1CQUFtQixnQkFBQSxZQUFBO0VBQ3JCLFNBQUFBLG1CQUFBQSxDQUFBQyxJQUFBLEVBQWdDO0FBQUEsSUFBQSxJQUFsQkMsRUFBRSxHQUFBRCxJQUFBLENBQUZDLEVBQUU7TUFBRUMsVUFBVSxHQUFBRixJQUFBLENBQVZFLFVBQVUsQ0FBQTtBQUFBQyxJQUFBQSxlQUFBLE9BQUFKLG1CQUFBLENBQUEsQ0FBQTtBQUN4QixJQUFBLElBQU1LLElBQUksR0FBRyxTQUFQQSxJQUFJ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
